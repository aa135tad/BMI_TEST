<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BMI 計算機</title>
    <style>
        body{font-family:Segoe UI, Roboto, Arial, sans-serif;display:flex;align-items:center;justify-content:center;height:100vh;margin:0;background:#ffc0cb}
        .card{background:white;padding:24px;border-radius:8px;box-shadow:0 6px 18px rgba(0,0,0,0.08);width:320px}
        h1{font-size:20px;margin:0 0 12px}
        label{display:block;font-size:13px;margin-top:10px}
        input[type="number"]{width:100%;padding:8px;margin-top:6px;border:1px solid #dfe6ee;border-radius:4px}
        .actions{display:flex;gap:8px;margin-top:14px}
        button{flex:1;padding:10px;border:0;border-radius:6px;cursor:pointer}
        button.calc{background:#2563eb;color:white}
        button.reset{background:#e6eef8}
        .result{margin-top:14px;padding:10px;border-radius:6px;background:#f3f6fb;font-weight:600;text-align:center;white-space:pre-line}
        .muted{font-size:13px;color:#666;margin-top:6px;text-align:center}
    </style>
</head>
<body>
    <div class="card" role="main">
        <h1>BMI 計算機</h1>
        <div>
            <label for="weight">體重 (kg)</label>
            <input id="weight" type="number" min="0" step="0.1" placeholder="例如：70" />

            <label for="height">身高 (cm)</label>
            <input id="height" type="number" min="0" step="0.1" placeholder="例如：175" />

            <div class="actions">
                <button class="calc" id="calcBtn">計算 BMI</button>
                <button class="reset" id="resetBtn">重設</button>
            </div>

            <div id="output" class="result" aria-live="polite" style="display:none"></div>
            <div class="muted">請輸入數值後點選「計算 BMI」</div>
        </div>
    </div>

    <script>
        const weightEl = document.getElementById('weight');
        const heightEl = document.getElementById('height');
        const calcBtn = document.getElementById('calcBtn');
        const resetBtn = document.getElementById('resetBtn');
        const output = document.getElementById('output');

        function bmiCategory(bmi){
            if(bmi < 18.5) return '體重過輕';
            if(bmi < 24) return '體重正常';
            if(bmi < 27) return '過重';
            return '肥胖';
        }

        function calculateBMI(){
            const w = parseFloat(weightEl.value);
            const h = parseFloat(heightEl.value);
            if(!isFinite(w) || !isFinite(h) || w <= 0 || h <= 0){
                output.style.display = 'block';
                output.textContent = '請輸入有效的體重與身高（大於 0 的數值）';
                return;
            }
            const heightM = h / 100;
            const bmi = w / (heightM * heightM);
            const bmiRounded = Math.round(bmi * 10) / 10;
            const cat = bmiCategory(bmi);

            // 計算正常範圍對應的體重（以 BMI 18.5 - 25 為標準範圍）
            const minNormalW = 18.5 * heightM * heightM;
            const maxNormalW = 25 * heightM * heightM;
            const minWRounded = Math.round(minNormalW * 10) / 10;
            const maxWRounded = Math.round(maxNormalW * 10) / 10;

            let advice = '';
            if(w > maxNormalW){
                const needLose = Math.round((w - maxNormalW) * 10) / 10;
                advice = `建議減少 ${needLose} kg（降至 ${maxWRounded} kg，BMI=${Math.round(25*10)/10} 的上限即可屬於正常）`;
            } else if (w < minNormalW){
                const needGain = Math.round((minNormalW - w) * 10) / 10;
                advice = `建議增加 ${needGain} kg（達到 ${minWRounded} kg，BMI=${Math.round(18.5*10)/10} 的下限即可屬於正常）`;
            } else {
                advice = `目前體重在正常範圍（${minWRounded} - ${maxWRounded} kg）。恭喜，符合合格標準，請繼續保持健康習慣！`;
            }

            output.style.display = 'block';
            output.textContent = `您的 BMI：${bmiRounded} — ${cat}\n${advice}`;
        }

        calcBtn.addEventListener('click', calculateBMI);
        resetBtn.addEventListener('click', ()=>{
            weightEl.value = '';
            heightEl.value = '';
            output.style.display = 'none';
        });

        // allow Enter to calculate when focused on inputs
        [weightEl, heightEl].forEach(el=>{
            el.addEventListener('keydown', e=>{ if(e.key === 'Enter') calculateBMI(); });
        });
    </script>
</body>
</html>